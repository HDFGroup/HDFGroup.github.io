
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<!-- If no var is set for $page_title on the top of each page than default title will be HDF Group -->

<title>
The HDF Group - Information, Support, and Software</title>
	<meta name="keywords" content="hdf, hdfeos, blog, hdf blog, hdf5 blog, hdf5, hdf4, hdf tools, hdf libraries, hdf viewer, hdf format, hdf file, hdf java, nafxcw.lib, phdf5, open source, hierarchical data format, ncsa, database, python hdf, mike folk, hdfview, hdf5 parallel" />
	<meta name="description" content="The HDF Group is a not-for-profit corporation with the mission of sustaining the HDF technologies and supporting HDF user communities worldwide with production-quality software and services." />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="expires" content="Wed, 26 Feb 2010 08:21:57 GMT" />
	<meta name="verify-v1" content="/m03HNmaDgGAcDe0PFtEVnXGtCkoeOocjr/Jwey2gdI=" />
	<link href="/css/layout.css" rel="stylesheet" type="text/css" media="screen, projection" />
	<link href="/css/print.css" rel="stylesheet" type="text/css" media="print" />
	<link rel="stylesheet" type="text/css" href="/css/js_style.css" />
	<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.2.0/prototype.js"></script>
	<!--<script type="text/javascript" src="/scriptaculous/lib/prototype.js"></script>-->
	<script type="text/javascript" src="/scriptaculous/src/effects.js"></script>
	<script type="text/javascript" src="/scriptaculous/validation.js"></script>
	<script type="text/javascript" src="/scriptaculous/animatedcollapse.js"></script>
	<script type="text/javascript" src="/scriptaculous/rollover.js"></script>	
	<script type="text/javascript" src="/scriptaculous/functions.js"></script>
	<script type="text/javascript" src="/scriptaculous/sorttable.js"></script>
	<!--<script type="text/javascript" src="/jquery-1.2.2.pack.js"></script>-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="/scriptaculous/jssor.slider.min.js"></script>

 	<link rel="stylesheet" type="text/css" href="/featuredcontentglider.css" />
    <script type="text/javascript" src="/featuredcontentglider.js"></script>

	</head>
	<body>
	<div id="mast_head">
		<a href="https://www.hdfgroup.org/"><img src="/images/hdf_logo.jpg" height="70" style="display:block; padding-left:10px;" align="left" alt="hdf images" /></a>
		<img src="/images/logo_5.jpg" height="70" style="display:block;" align="right" alt="hdf images" />
	</div> 
				
	<div id="nav_wrapper">
		<div>
		<div id="section-">
			<ul id="nav">
				<li id="t-index"><a href="https://www.hdfgroup.org/">Home</a> </li>
				<li id="t-products"><a href="/products/">Products</a></li>
				<li id="t-services"><a href="/services/">Services</a></li>
				<li id="t-about"><a href="/about/">About Us</a></li>
				<li id="t-news"><a href="/news/">News</a> </li>
				<li id="t-blog"><a href="https://www.hdfgroup.org/blog">Blog</a></li>
				<li id="t-contact"><a href="/about/contact.html">Contact Us</a></li> 
			</ul>
			<script type="text/javascript">
			
  (function() {
    var cx = '007250492606109219119:sb2eg2bgoyy';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>	
					<script type="text/javascript">
					    jQuery(document).ready(function ($) {
					        // var options = {
					        //     $ArrowNavigatorOptions: {
					        //         $Class: $JssorArrowNavigator$,
					        //         $ChanceToShow: 2
					        //     }
					        // };					    	


							var options = { 
											$AutoPlay: true, $SlideshowOptions: { $Class: $JssorSlideshowRunner$, $Transitions: [{ $Duration:5000, $Fade: true, $Opacity:2 }] } , 
											$ArrowNavigatorOptions: { 
												$Class: $JssorArrowNavigator$, 
												$ChanceToShow: 2
											}
										  };


					        var jssor_slider1 = new $JssorSlider$('slider1_container', options);
					    });
					</script>
									                  
			
		</div>
		</div>             
	</div>
				
<!--START: MAIN -->
<div id="wrapper" style="margin-top:-15px;"> 

<!--START: SIDE_BAR -->
<div id="side_bar">

<form method="get" action="" class="form" >
	<select onchange="window.open(this.options[this.selectedIndex].value,'_top')" name="" style="border:2px solid #c1c1c1;">
		<option value="" class="ql1">- - Quick Links - -</option>
		<option value="/HDF5/" class="ql">HDF5</option>
		<option value="/products/hdf4/" class="ql">HDF4</option>
		<option value="/tools/" class="ql">Tools</option>
		<option value="/projects/" class="ql">Projects</option>
		<option value="/downloads/" class="ql">Downloads</option>
		<option value="/documentation/" class="ql">Documentation</option>
	        <option value="/pubs/" class="ql">Publications</option>
		<option value="/about/" class="ql">Contact Us</option>
	</select>
</form>
<ul style="border:1px solid #c1c1c1; margin-top:25px;"> 

	<li style="background:url(/images/menubg.png); padding:0px; padding-left:7px; color:#27343C; font-weight:500; text-align:left;">
	LINKS</li><li><a href="https://www.hdfgroup.org/">Main Website</a></li><li><a  href="/HDF5/whatishdf5.html">What is HDF5?</a></li><li><a  href="/about/HDF5Brochure_2012.pdf">Online Brochure</a></li><li><a  href="/downloads/index.html">Downloads</a></li><li><a  href="/HDF5/doc/index.html">Documentation</a></li><li><a  href="/products/hdf5_tools/">Software using HDF5</a></li><li><a  href="/HDF5/users5.html">HDF5 Users</a></li><li><a  href="/HDF5/hdf5-files.html">Sample HDF5 Files</a></li><li><a  href="/HDF5/acknowledge5.html">Acknowledgments</a></li><li><a  href="/products/licenses.html">Licenses</a></li></ul> 

</div>

<!--END: SIDE_BAR -->

<!--START: CONTENT -->
<div id="content">
<p><font color="red"><center><strong>This web site is no longer maintained (but will remain online).<br /> Please see The HDF Group's new <a href="https://portal.hdfgroup.org">Support Portal</a> for the latest information.</strong></center></font></p>
	<div class=bc><p style="color:orange; ";><a href="/" title="HOME">HOME</a> &gt; <a href="/HDF5/" title="HDF5">HDF5</a> &gt; <a href="/HDF5/Tutor/" title="TUTOR">TUTOR</a></p></div>
<fieldset><h1>HDF5 Tutorial: &nbsp; Learning The Basics<br />Reading
from and Writing to a Dataset</h1>
</fieldset>
<P>


<H2>Contents:</H2>
<ul class="ul">
 <LI><p><A HREF="#rdwr">Reading from and Writing to a Dataset</A></p></li>
 <LI><p><A HREF="#hl">High Level APIs</A></p></li>
 <LI><p>Programming Example (C, Fortran, Java, C++, Python):</p> </li>
      <ul class="ul">
       <LI> <A HREF="#desc">Description </A> </li>
       <LI> <A HREF="#rem">Remarks</A> </li>
       <LI> <A HREF="#fc">File Contents</A></li>
      </UL>
    </UL>
<HR>
<A NAME="rdwr"> </a>
<H2>Reading from and Writing to a Dataset</h2>
<P>
During a dataset I/O operation, the library transfers raw data between memory
and the file. The data in memory can have a datatype different from that of 
the file and can also be of a different size 
(i.e., the data in memory is a subset of the dataset elements, or vice versa).
Therefore, to perform read or write operations, the application
program must specify:
<ul class="ul">
  <li>&raquo; The dataset</li>

  <li>&raquo; The dataset's datatype in memory</li>

  <li>&raquo; The dataset's dataspace in memory</li>

  <li>&raquo; The dataset's dataspace in the file</li>

  <li>&raquo; The dataset transfer property list </li>
    <ul class="ul">
      (The dataset transfer property list controls various aspects of the 
      I/O operations, such as the number of processes participating in a
      collective I/O request or hints to the library to control caching of
      raw data. In this tutorial, we use the default dataset transfer 
      property list.)
    </ul>
  <li>&raquo; The data buffer</li>
</UL>
</p>

<P>
The steps to read from or write to a dataset are
as follows:
<ul class="ul">
  <LI>&raquo; Obtain the dataset identifier.</li>
  <LI>&raquo; Specify the memory datatype.</li>
  <LI>&raquo; Specify the memory dataspace.</li>
  <LI>&raquo; Specify the file dataspace.</li>
  <LI>&raquo; Specify the transfer properties.</li>
  <LI>&raquo; Perform the desired operation on the dataset.</li>
  <LI>&raquo; Close the dataset.</li>
  <LI>&raquo; Close the dataspace, datatype, and property list if necessary.</li>
</ul>
</p>

<p>
To read from or write to a dataset, 
the <a href="/HDF5/doc/RM/RM_H5D.html#Dataset-Read">H5Dread /h5dread_f</a> and 
<a href="/HDF5/doc/RM/RM_H5D.html#Dataset-Write">H5Dwrite / h5dwrite_f</a>
routines are used.
</p>

<P> 
<PRE>
<I>C</I>:
   status = H5Dread (set_id, mem_type_id, mem_space_id, file_space_id,
                     xfer_prp, buf );
   status = H5Dwrite (set_id, mem_type_id, mem_space_id, file_space_id,
                     xfer_prp, buf);

<I>FORTRAN</I>:
   CALL h5dread_f(dset_id, mem_type_id, buf, dims, error, &
                     mem_space_id=mspace_id, file_space_id=fspace_id, &
                     xfer_prp=xfer_plist_id)
        <font face=times><i>or</i></font>
   CALL h5dread_f(dset_id, mem_type_id, buf, dims,  error)


   CALL h5dwrite_f(dset_id, mem_type_id, buf, dims, error, &
                     mem_space_id=mspace_id, file_space_id=fspace_id, &
                     xfer_prp=xfer_plist_id)
        <font face=times><i>or</i></font>
   CALL h5dwrite_f(dset_id, mem_type_id, buf, dims, error)
</PRE>
</p>

<P>
<A NAME="hl">                                                                   
<H2>High Level APIs</H2></A>                                                    
The High Level <A HREF="./h5lite.html">HDF5 Lite APIs</A> include 
functions that simplify and condense the steps for creating and 
reading datasets. 
Please be sure to review them, in addition to this tutorial.
</p>

<H2> Programming Example</H2>
<A NAME="desc"></a>
<H3><U>Description</U></H3>      
<p>
The following example shows how to read and write an existing dataset.
It opens the file created in the previous example, obtains the dataset 
identifier for the dataset <code>/dset</code>, 
writes the dataset to the file, then reads the dataset back. 
It then closes the dataset and file. 
</p>

<p>
<ul class="ul">
[ <A HREF="/ftp/HDF5/current/src/unpacked/examples/h5_rdwt.c">C Example</A> ] - <code>h5_rdwt.c</code><br />
[ <A HREF="/ftp/HDF5/current/src/unpacked/fortran/examples/h5_rdwt.f90">FORTRAN Example</A> ] - <code>h5_rdwt.f90</code><br />
[ <A HREF="/ftp/HDF5/current/src/unpacked/c++/examples/h5tutr_rdwt.cpp">C++ Example</A> ] - <code>h5tutr_rdwt.cpp</code><br />
[ <A HREF="/ftp/HDF5/examples/Py/h5_rdwt.py">Python Example</A> ] - <code>h5_rdwt.py</code><br />
</ul>
</p>

<p>
Note that H5S_ALL is passed in for both the memory and file dataspace parameters in the read and write calls. 
This indicates that the entire dataspace of the dataset will be read or written to. H5S_ALL by itself does not
necessarily have this meaning. See the Reference Manual entry for H5Dread or H5Dwrite for more information on using H5S_ALL.
</p>

<p>
See <a href="/HDF5/examples/intro.html">HDF5 Introductory Examples</a>
for the examples used in the Learning the Basics tutorial. There are examples for several other languages,
including Java.
</p>

<p>
For details on compiling an HDF5 application:                                   
<B>[</B> 
<A HREF="./compile.html">click here</A>            
<B>]</B>

<A NAME="rem"> </a>
<H3><U>Remarks</U></H3>
<ul class="ul">
<p>
<a href="/HDF5/doc/RM/RM_H5F.html#File-Open">H5Fopen / h5fopen_f</a> opens an existing file and returns a file identifier.
</p>

<p>
<a href="/HDF5/doc/RM/RM_H5D.html#Dataset-Open">H5Dopen / h5dopen_f</a> opens an existing dataset with the specified name and location.
</p>

<P>
<a href="/HDF5/doc/RM/RM_H5D.html#Dataset-Write">H5Dwrite / h5dwrite_f</a> writes raw data 
   from an application buffer to the specified
   dataset, converting from the datatype and dataspace of the dataset in
   memory to the datatype and dataspace of the dataset in the file. Specifying H5S_ALL for both the memory and
   file dataspaces indicates that the entire dataspace of the dataset is to be written to. 
   H5S_ALL by itself does not necessarily have this meaning. See the Reference Manual entry for H5Dwrite 
   for more information on using H5S_ALL.
</p>

<P>
<a href="/HDF5/doc/RM/RM_H5D.html#Dataset-Read">H5Dread / h5dread_f</a> reads raw data from the 
    specified dataset to an application buffer,
   converting from the file datatype and dataspace to the memory datatype and
   dataspace. Specifying H5S_ALL for both the memory and file dataspaces indicates that the entire dataspace of
   the dataset is to be read. H5S_ALL by itself does not necessarily have this meaning. See the Reference 
   Manual entry for H5Dread for more information on using H5S_ALL.
</p>

</UL>
</UL>
<A NAME="fc"> </a>
<H3><U>File Contents</U></H3>
Figure 6.1a  shows the contents of <code>dset.h5</code> (created by the C program).
<BR>
Figure 6.1b  shows the contents of <code>dsetf.h5</code> (created by the FORTRAN 
program).  
<P>
      <B>Fig. 6.1a</B> &nbsp;  <I><code>dset.h5</code> in DDL</I>
<PRE>
      HDF5 "dset.h5" {
      GROUP "/" {
         DATASET "dset" {
            DATATYPE { H5T_STD_I32BE }
            DATASPACE { SIMPLE ( 4, 6 ) / ( 4, 6 ) }
            DATA {
               1, 2, 3, 4, 5, 6,
               7, 8, 9, 10, 11, 12,
               13, 14, 15, 16, 17, 18,
               19, 20, 21, 22, 23, 24
            }
         }
      }
      }
</PRE>
<P>
      <B>Fig. 6.1b</B> &nbsp;  <I><code>dsetf.h5</code> in DDL</I>
<PRE>
HDF5 "dsetf.h5" {
GROUP "/" {
   DATASET "dset" {
      DATATYPE { H5T_STD_I32BE }
      DATASPACE { SIMPLE ( 6, 4 ) / ( 6, 4 ) }
      DATA {
         1, 7, 13, 19,
         2, 8, 14, 20,
         3, 9, 15, 21,
         4, 10, 16, 22,
         5, 11, 17, 23,
         6, 12, 18, 24
      }
   }
}
}
</PRE>



<hr>
<i>
- - Last modified: 28 September 2017</i>
	   </div>
	   <!--END: CONTENT -->
<!--END: WRAPPER -->
<script src="/scriptaculous/gatag.js" type="text/javascript"></script>

<!-- <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
				
<!--
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-3782034-1");
pageTracker._trackPageview();
} catch(err) {}</script>
-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3782034-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>



