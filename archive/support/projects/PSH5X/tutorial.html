
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<!-- If no var is set for $page_title on the top of each page than default title will be HDF Group -->

<title>
HDF PSH5X Project</title>
	<meta name="keywords" content="hdf, hdfeos, blog, hdf blog, hdf5 blog, hdf5, hdf4, hdf tools, hdf libraries, hdf viewer, hdf format, hdf file, hdf java, nafxcw.lib, phdf5, open source, hierarchical data format, ncsa, database, python hdf, mike folk, hdfview, hdf5 parallel" />
	<meta name="description" content="The HDF Group is a not-for-profit corporation with the mission of sustaining the HDF technologies and supporting HDF user communities worldwide with production-quality software and services." />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="expires" content="Wed, 26 Feb 2010 08:21:57 GMT" />
	<meta name="verify-v1" content="/m03HNmaDgGAcDe0PFtEVnXGtCkoeOocjr/Jwey2gdI=" />
	<link href="../../css/layout.css" rel="stylesheet" type="text/css" media="screen, projection" />
	<link href="../../css/print.css" rel="stylesheet" type="text/css" media="print" />
	<link rel="stylesheet" type="text/css" href="../../css/js_style.css" />
	<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.2.0/prototype.js"></script>
	<!--<script type="text/javascript" src="/scriptaculous/lib/prototype.js"></script>-->
	<script type="text/javascript" src="../../scriptaculous/src/effects.js"></script>
	<script type="text/javascript" src="../../scriptaculous/validation.js"></script>
	<script type="text/javascript" src="../../scriptaculous/animatedcollapse.js"></script>
	<script type="text/javascript" src="../../scriptaculous/rollover.js"></script>	
	<script type="text/javascript" src="../../scriptaculous/functions.js"></script>
	<script type="text/javascript" src="../../scriptaculous/sorttable.js"></script>
	<!--<script type="text/javascript" src="/jquery-1.2.2.pack.js"></script>-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="../../scriptaculous/jssor.slider.min.js"></script>

 	<link rel="stylesheet" type="text/css" href="../../featuredcontentglider.css" />
    <script type="text/javascript" src="../../featuredcontentglider.js"></script>

	</head>
	<body>
	<div id="mast_head">
		<a href="https://www.hdfgroup.org/"><img src="../../images/hdf_logo.jpg" height="70" style="display:block; padding-left:10px;" align="left" alt="hdf images" /></a>
		<img src="../../images/logo_5.jpg" height="70" style="display:block;" align="right" alt="hdf images" />
	</div> 
				
	<div id="nav_wrapper">
		<div>
		<div id="section-">
			<ul id="nav">
				<li id="t-index"><a href="https://www.hdfgroup.org/">Home</a> </li>
				<li id="t-products"><a href="../../products/index.html">Products</a></li>
				<li id="t-services"><a href="../../services/index.html">Services</a></li>
				<li id="t-about"><a href="../../about/index.html">About Us</a></li>
				<li id="t-news"><a href="../../news/index.html">News</a> </li>
				<li id="t-blog"><a href="https://www.hdfgroup.org/blog">Blog</a></li>
				<li id="t-contact"><a href="../../about/contact.html">Contact Us</a></li> 
			</ul>
			<script type="text/javascript">
			
  (function() {
    var cx = '007250492606109219119:sb2eg2bgoyy';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>	
					<script type="text/javascript">
					    jQuery(document).ready(function ($) {
					        // var options = {
					        //     $ArrowNavigatorOptions: {
					        //         $Class: $JssorArrowNavigator$,
					        //         $ChanceToShow: 2
					        //     }
					        // };					    	


							var options = { 
											$AutoPlay: true, $SlideshowOptions: { $Class: $JssorSlideshowRunner$, $Transitions: [{ $Duration:5000, $Fade: true, $Opacity:2 }] } , 
											$ArrowNavigatorOptions: { 
												$Class: $JssorArrowNavigator$, 
												$ChanceToShow: 2
											}
										  };


					        var jssor_slider1 = new $JssorSlider$('slider1_container', options);
					    });
					</script>
									                  
			
		</div>
		</div>             
	</div>
				
<!--START: MAIN -->
<div id="wrapper" style="margin-top:-15px;"> 

<!--START: SIDE_BAR -->
<div id="side_bar">

<form method="get" action="tutorial.html" class="form" >
	<select onchange="window.open(this.options[this.selectedIndex].value,'_top')" name="" style="border:2px solid #c1c1c1;">
		<option value="" class="ql1">- - Quick Links - -</option>
		<option value="/HDF5/" class="ql">HDF5</option>
		<option value="/products/hdf4/" class="ql">HDF4</option>
		<option value="/tools/" class="ql">Tools</option>
		<option value="/projects/" class="ql">Projects</option>
		<option value="/downloads/" class="ql">Downloads</option>
		<option value="/documentation/" class="ql">Documentation</option>
	        <option value="/pubs/" class="ql">Publications</option>
		<option value="/about/" class="ql">Contact Us</option>
	</select>
</form>
<ul style="border:1px solid #c1c1c1; margin-top:25px;"> 

	<li style="background:url(../../images/menubg.png); padding:0px; padding-left:7px; color:#27343C; font-weight:500; text-align:left;">
	LINKS</li><li><a href="../../products/hdf5/index.html">HDF5</a></li><li><a href="../../products/hdf4/index.html">HDF4</a></li><li><a href="../../tools/index.html">Tools</a></li><li><a href="../index.html">Projects</a></li><li><a href="../../downloads/index.html">Downloads</a></li><li><a href="../../documentation/index.html">Documentation</a></li></ul> 

</div>

<!--END: SIDE_BAR -->

<!--START: CONTENT -->
<div id="content">
<p><font color="red"><center><strong>This web site is no longer maintained (but will remain online).<br /> Please see The HDF Group's new <a href="https://portal.hdfgroup.org">Support Portal</a> for the latest information.</strong></center></font></p>
	<div class=bc><p style="color:orange; ";><a href="../../index.html" title="HOME">HOME</a> &gt; <a href="../index.html" title="PROJECTS">PROJECTS</a> &gt; <a href="index.html" title="PSH5X">PSH5X</a></p></div>                        <fieldset><h1>PSH5X Tutorial</h1></fieldset>

<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>HDF Group - PSH5X Tutorial</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
        <a href="index.html"><img src="img/psh5x_logo_100x75.gif" alt="PSH5X logo" align="bottom"
        /></a>
        <p> In the following example, we create an HDF5 file whose BNF representation is shown in
            section 4, &quot;An Example of an HDF5 File in DDL&quot;, of <a
                href="../../HDF5/doc/ddl.html">DDL in BNF for HDF5</a>. The
            (multi-)graph structure is shown in the figure below.</p>
        <img src="img/sample.gif" alt="PSH5X logo" align="middle" />
        <p> The different shapes represent different kinds of HDF5 objects: circles - HDF5 groups,
            rectangles - HDF5 datasets, triangles - HDF5 committed datatypes, hexagons - HDF5
            attributes. Arrows represent HDF5 links labelled with their respective link name.
            (Download the script, the image file, and the expected outcome here: <a
                href="Create-BNFSample.ps1.html">Create-BNFSample.ps1</a>&nbsp;,&nbsp;<a
                    href="https://support.hdfgroup.org/projects/PSH5X/hdf_logo.jpg">hdf_logo.jpg</a>&nbsp;,&nbsp;<a href="sample.h5.html"
                        >sample.h5</a>) </p>
        <pre class="code">
Import-Module HDF5

# determine the HDF5 file's name
$name = 'sample'
$file = Join-Path (Split-Path $MyInvocation.MyCommand.Path) "$name.h5"

if (Test-Path $file) {
    Write-Error "File $file exists!"
    return
}

# create a new PSDrive and a new HDF5 file as a side-effect (-Force)
New-H5Drive $name $file -RW -Force
  
# make the HDF5 root of the new drive our "working directory"
cd "$($name):\"

# create a scalar string attribute of the root group
New-H5Attribute . attr1 'string attribute' cstring17
            
# create &amp; initialize a new simple 10x10 integer dataset at /dset1
New-H5Dataset dset1 H5T_STD_I32BE 10,10
$value = New-Object 'int[,]' 10,10
foreach ($i in 0..9) {
    foreach ($j in 0..9) {
        $value[$i,$j] = $j
    }
}
Set-H5DatasetValue dset1 $value
            
# define a new compound datatype (JSON)
$t = @"{
    "Class": "Compound",
    "Size": 16,
    "Members": {
        "a": [0, "H5T_STD_I32BE"],
        "b": [4, "H5T_IEEE_F32BE"],
        "c": [8, "H5T_IEEE_F64BE"]
    }
}"@          

# define a new .NET type to represent $t in memory
Add-Type @"
    public class cmpd_a_b_c
    {
        public int a;
        public float b;
        public double c;
    }
"@

# create &amp; initialize a new dataset /dset2 of type $t
New-H5Dataset dset2 $t 5
$value = New-Object 'cmpd_a_b_c[]' 5
foreach ($i in 0..4)
{
    $value[$i] = New-Object cmpd_a_b_c
    $value[$i].a = $i+1
    $value[$i].b = ($i+1)/10
    $value[$i].c = ($i+1)/100
}
Set-H5DatasetValue dset2 $value

# create a new group /group1
$group = New-H5Group group1

# create a new linked datatype at /type 1 and
# its .NET in-memory representation
$t = @"{
    "Class": "Compound",
    "Size": 136,
    "Members": {
        "a": [0, {"Class": "Array", "Base": "H5T_STD_I32BE", "Dims": [4]}],
        "b": [16,{"Class": "Array", "Base": "H5T_IEEE_F32BE", "Dims":[5,6]}]
    }
}"@

Add-Type @"
    public class cmpd_a_b
    {
        public int[] a = new int[4];
        public float[,] b = new float [5,6];
    }
"@

$dtype = New-H5LinkedDatatype type1 $t

# make /group1 the "working directory" and create &amp; initialize
# a new dataset at /group1/dset3

cd group1

New-H5Dataset dset3 /type1 5
$value = New-Object 'cmpd_a_b[]' 5
foreach ($i in 0..4)
{
    $value[$i] = New-Object cmpd_a_b
    foreach ($j in 0..3) {
        $value[$i].a[$j] = $j
    }
    foreach ($r in 0..4) {
        foreach ($c in 0..5) {
            $value[$i].b[$r,$c] = ($r+1)/10
        }
    }
}
Set-H5DatasetValue dset3 $value 

#go back to the root group
cd ..

# create and initialize a new dataset at /dset3
$t = '{"Class": "Vlen", "Base": "H5T_STD_I32LE"}'
New-H5Dataset dset3 $t 4
$value = (,0), (10,11), (20,21,22), (30,31,32,33)
Set-H5DatasetValue dset3 $value

# hard link the group at /group1 as /group2 
New-H5Hardlink group2 /group1

# create a new soft link at /slink1
New-H5Softlink slink1 somevalue

# bonus material: add a JPEG image as an HDF5 image
$image = Join-Path (Split-Path $MyInvocation.MyCommand.Path) 'hdf_logo.jpg'
if (Test-Path $image) {
    New-H5Image hdf_logo $image
}

# leave &amp; remove the HDF5 drive
C:
Remove-H5Drive $name

# open the new HDF5 file in HDFView (if present)
$hdfview = 'C:\Program Files\TheHDFGroup\HDFView2.8\HDFView.exe'
if (Test-Path $hdfview) {
    $hdfview $file
}
        </pre>
    </body>
</html>

<i>
- - Last modified: 12 October 2016</i>
	   </div>
	   <!--END: CONTENT -->
<!--END: WRAPPER -->
<script src="../../scriptaculous/gatag.js" type="text/javascript"></script>

<!-- <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
				
<!--
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-3782034-1");
pageTracker._trackPageview();
} catch(err) {}</script>
-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3782034-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
