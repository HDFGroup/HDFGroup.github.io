
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<!-- If no var is set for $page_title on the top of each page than default title will be HDF Group -->

<title>
The HDF Group - Information, Support, and Software</title>
	<meta name="keywords" content="hdf, hdfeos, blog, hdf blog, hdf5 blog, hdf5, hdf4, hdf tools, hdf libraries, hdf viewer, hdf format, hdf file, hdf java, nafxcw.lib, phdf5, open source, hierarchical data format, ncsa, database, python hdf, mike folk, hdfview, hdf5 parallel" />
	<meta name="description" content="The HDF Group is a not-for-profit corporation with the mission of sustaining the HDF technologies and supporting HDF user communities worldwide with production-quality software and services." />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="expires" content="Wed, 26 Feb 2010 08:21:57 GMT" />
	<meta name="verify-v1" content="/m03HNmaDgGAcDe0PFtEVnXGtCkoeOocjr/Jwey2gdI=" />
	<link href="../../../../css/layout.css" rel="stylesheet" type="text/css" media="screen, projection" />
	<link href="../../../../css/print.css" rel="stylesheet" type="text/css" media="print" />
	<link rel="stylesheet" type="text/css" href="../../../../css/js_style.css" />
	<link rel="shortcut icon" href="../../../../images/favicon.ico" type="image/x-icon" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.2.0/prototype.js"></script>
	<!--<script type="text/javascript" src="/scriptaculous/lib/prototype.js"></script>-->
	<script type="text/javascript" src="../../../../scriptaculous/src/effects.js"></script>
	<script type="text/javascript" src="../../../../scriptaculous/validation.js"></script>
	<script type="text/javascript" src="../../../../scriptaculous/animatedcollapse.js"></script>
	<script type="text/javascript" src="../../../../scriptaculous/rollover.js"></script>	
	<script type="text/javascript" src="../../../../scriptaculous/functions.js"></script>
	<script type="text/javascript" src="../../../../scriptaculous/sorttable.js"></script>
	<!--<script type="text/javascript" src="/jquery-1.2.2.pack.js"></script>-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="../../../../scriptaculous/jssor.slider.min.js"></script>

 	<link rel="stylesheet" type="text/css" href="../../../../featuredcontentglider.css" />
    <script type="text/javascript" src="../../../../featuredcontentglider.js"></script>

	</head>
	<body>
	<div id="mast_head">
		<a href="https://www.hdfgroup.org/"><img src="../../../../images/hdf_logo.jpg" height="70" style="display:block; padding-left:10px;" align="left" alt="hdf images" /></a>
		<img src="../../../../images/logo_5.jpg" height="70" style="display:block;" align="right" alt="hdf images" />
	</div> 
				
	<div id="nav_wrapper">
		<div>
		<div id="section-">
			<ul id="nav">
				<li id="t-index"><a href="https://www.hdfgroup.org/">Home</a> </li>
				<li id="t-products"><a href="../../../index.html">Products</a></li>
				<li id="t-services"><a href="../../../../services/index.html">Services</a></li>
				<li id="t-about"><a href="../../../../about/index.html">About Us</a></li>
				<li id="t-news"><a href="../../../../news/index.html">News</a> </li>
				<li id="t-blog"><a href="https://www.hdfgroup.org/blog">Blog</a></li>
				<li id="t-contact"><a href="../../../../about/contact.html">Contact Us</a></li> 
			</ul>
			<script type="text/javascript">
			
  (function() {
    var cx = '007250492606109219119:sb2eg2bgoyy';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>	
					<script type="text/javascript">
					    jQuery(document).ready(function ($) {
					        // var options = {
					        //     $ArrowNavigatorOptions: {
					        //         $Class: $JssorArrowNavigator$,
					        //         $ChanceToShow: 2
					        //     }
					        // };					    	


							var options = { 
											$AutoPlay: true, $SlideshowOptions: { $Class: $JssorSlideshowRunner$, $Transitions: [{ $Duration:5000, $Fade: true, $Opacity:2 }] } , 
											$ArrowNavigatorOptions: { 
												$Class: $JssorArrowNavigator$, 
												$ChanceToShow: 2
											}
										  };


					        var jssor_slider1 = new $JssorSlider$('slider1_container', options);
					    });
					</script>
									                  
			
		</div>
		</div>             
	</div>
				
<!--START: MAIN -->
<div id="wrapper" style="margin-top:-15px;"> 

<!--START: SIDE_BAR -->
<div id="side_bar">

<form method="get" action="compound.html" class="form" >
	<select onchange="window.open(this.options[this.selectedIndex].value,'_top')" name="" style="border:2px solid #c1c1c1;">
		<option value="" class="ql1">- - Quick Links - -</option>
		<option value="/HDF5/" class="ql">HDF5</option>
		<option value="/products/hdf4/" class="ql">HDF4</option>
		<option value="/tools/" class="ql">Tools</option>
		<option value="/projects/" class="ql">Projects</option>
		<option value="/downloads/" class="ql">Downloads</option>
		<option value="/documentation/" class="ql">Documentation</option>
	        <option value="/pubs/" class="ql">Publications</option>
		<option value="/about/" class="ql">Contact Us</option>
	</select>
</form>
<ul style="border:1px solid #c1c1c1; margin-top:25px;"> 

	<li style="background:url(../../../../images/menubg.png); padding:0px; padding-left:7px; color:#27343C; font-weight:500; text-align:left;">
	LINKS</li><li><a href="https://www.hdfgroup.org/">Main Website</a></li><li><a  href="../../../../downloads/index.html">Downloads</a></li><li><a  href="https://support.hdfgroup.org/products/java/hdfview/">HDFView</a></li><li><a  href="../index.html">JNI3 Libraries</a></li><li><a  href="../../../../HDF5/hdf5-files.html">Sample HDF5 Files</a></li><li><a  href="../../../licenses.html">Licenses</a></li></ul> 

</div>

<!--END: SIDE_BAR -->

<!--START: CONTENT -->
<div id="content">
<p><font color="red"><center><strong>This web site is no longer maintained (but will remain online).<br /> Please see The HDF Group's new <a href="https://portal.hdfgroup.org">Support Portal</a> for the latest information.</strong></center></font></p>
	<div class=bc><p style="color:orange; ";><a href="../../../../index.html" title="HOME">HOME</a> &gt; <a href="../../../index.html" title="PRODUCTS">PRODUCTS</a> &gt; <a href="../../index.html" title="JAVA">JAVA</a> &gt; <a href="../index.html" title="JNI3">JNI3</a> &gt; <a href="index.html" title="JHI5">JHI5</a></p></div><fieldset><h1>Using Compound Data Types</h1></fieldset>

<p>HDF-5 Compound Datatypes are records of heterogeneous elements (possibly
including arrays and other compound data types). These are essentially
like C 'structs', and are stored and retrieved as packed arrays of bytes.
The Java language cannot directly represent such structured records, but
it can store and retrieve HDF-5 compound datatypes in two ways: as
arrays of bytes (which must be interpreted) and by reading individual fields
of the records.
<p><b><i>Using Compound Datatypes as Bytes</i></b>
<p>An array of compound datatypes can be defined, written, and read by
copying the data to and from appropriate sized arrays of bytes. It
is up to the Java application to assure that the data is copied correctly.
<p>For instance, an array of Java objects representing complex numbers--each
complex number has two Double values, the real and imaginary components.
An array of complex numbers can be stored as an HDF-5 Compound Datatype,
with two fields of 8 bytes each. Each record is 16 bytes long, and
the data can be written as an array of bytes.
<br>
<blockquote>
<pre><b>byte[] data = new bytes[100 * 16]; // An array of 100 'complex' numbers</b></pre>

<pre><b>// ... fill in the array with complex numbers: this is up to
// the Java program to figure out how to do this...</b></pre>

<pre><b>int dataspace = -1;</b></pre>

<pre><b>try {</b></pre>

<blockquote>
<pre><b>dataspace = h5.H5Screate_simple( rankf, dimsc, null );</b></pre>
</blockquote>

<pre><b>// create a compound data type with two fields of type double
// complex {
// double real; // bytes 0-7
// double imaginary; // bytes 8-15
// }
 int datatype = -1;
 datatype = H5.H5Tcreate( HDF5Constants.H5T_COMPOUND, 16 );</b></pre>

<blockquote>
<pre><b>H5.H5Tinsert( datatype, "real", 0,
 HDF5Constants.HT_NATIVE_DOUBLE );</b></pre>
</blockquote>

<blockquote>
<pre><b>H5.H5Tinsert( datatype, "imaginary", 8,
 HDF5Constants.HT_NATIVE_DOUBLE );</b></pre>
</blockquote>

<pre><b> // create the dataset with this dataspace and compound
 // datatype
 int dataset = -1;</b></pre>

<blockquote>
<pre><b>hH.H5Dcreate( file, datasetName,
 datatype, dataspace, HDF5Constants.H5P_DEFAULT );</b></pre>

<pre><b>H5.H5Dwrite( dataset, datatype, dataspace,
 HDF5Constants.H5S_ALL, HDF5Constants.H5P_DEFAULT,
 bytes );</b></pre>
</blockquote>

<pre><b>} catch ( HDFException ex ) {
 exit(1);
}</b></pre>
</blockquote>
In this example, an HDF-5 Compound Datatype is declared, and an array of
100 records is created. The array is written from the Java array
of bytes. Assuming that the array 'bytes' is correctly initialized,
this will create the correct data in the HDF-5 file.
<p><i>The programmer should be aware that the proper layout of the bytes
depends on the platform and C compiler. It is up to the program to
make sure it constructs the correct records.</i>
<p><b><i>Using Compound Datatypes by Elements</i></b>
<p>A second alternative for accessing Compound Datatypes is to access each
field individually. This results in a read of an array of a single
data type. In the example above, the dataset could be read by reading
the 'real' component into an array, and then reading the 'imaginary' component
into a second array. The following example illustrates this.
<blockquote>
<pre></pre>

<pre><b>// An array of 100 'real' components
Double[] realValues = new Double[100];</b></pre>

<pre><b>// An array of 100 'imag' components
Double[] imaginaryValues = new Double[100];</b></pre>

<pre><b>int dataspace = -1;</b></pre>

<pre><b>try {</b></pre>

<blockquote>
<pre><b>dataspace = H5.H5Screate_simple( rankf, dimsc, null );</b></pre>
</blockquote>

<pre><b> // create a compound data type to read the 'real' field of type double

 int datatype = -1;
 datatype = H5.H5Tcreate( HDF5Constants.H5T_COMPOUND, 8 );</b></pre>

<blockquote>
<pre><b>H5.H5Tinsert( datatype, "real", 0, HDF5Constants.HT_NATIVE_DOUBLE );</b></pre>
</blockquote>
</blockquote>

<blockquote>
<pre><b> // create the dataset with this dataspace and compound datatype
 int dataset = -1;</b></pre>

<blockquote>
<pre><b>H5.H5Dopen( file, datasetName, HDF5Constants.H5P_DEFAULT );</b></pre>

<pre><b>h5.H5Dread( dataset, datatype, dataspace,
 HDF5Constants.H5S_ALL, HDF5Constants.H5P_DEFAULT,
 realValues );</b></pre>

<pre><b>// create a compound data type to read the 'real' field of type double

int datatype2 = -1;
datatype2 = H5.H5Tcreate( HDF5Constants.H5T_COMPOUND, 8 );</b></pre>

<pre><b>H5.H5Tinsert( datatype, "imaginary", 0,
 HDF5Constants.HT_NATIVE_DOUBLE );

H5.H5Dread( dataset, datatype, dataspace,
 HDF5Constants.H5S_ALL, HDF5Constants.H5P_DEFAULT,
 imaginaryValues );</b></pre>
</blockquote>

<pre><b>} catch ( HDFException ex ) {
 exit(1);
}</b></pre>
</blockquote>
In this example, all the records are read field by field. The first
component, "real", is read into an array of 100 Doubles, and the second
field is read into a second array.
<p>In this approach, the HDF-5 Library assures that the correct data is
read as long as the compound Datatype is correct.
<p>
<hr noshade size="1">

<i>
- - Last modified: 06 May 2016</i>
	   </div>
	   <!--END: CONTENT -->
<!--END: WRAPPER -->
<script src="../../../../scriptaculous/gatag.js" type="text/javascript"></script>

<!-- <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
				
<!--
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-3782034-1");
pageTracker._trackPageview();
} catch(err) {}</script>
-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3782034-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>


